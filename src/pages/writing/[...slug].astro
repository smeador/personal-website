---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

export async function getStaticPaths() {
  const articles = await getCollection('articles');
  
  return articles.map((article) => ({
    params: { slug: article.slug },
    props: { article },
  }));
}

const { article } = Astro.props;
const { Content } = await article.render();
const { title, date, excerpt } = article.data;
---

<BaseLayout title={title} description={excerpt}>
  <article class="pt-8 md:pt-2 pb-16" data-pagefind-body>
    <div class="container mx-auto max-w-5xl px-4">
      <!-- Article Header -->
      <header class="text-center mb-12 mt-2 md:mt-8" data-pagefind-meta="title">
        <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-foreground mb-4 leading-tight">
          {title}
        </h1>
        
        <div class="text-muted-foreground text-sm space-y-2">
          <time datetime={date.toISOString()}>
            {date.toLocaleDateString('en-US', { 
              year: 'numeric', 
              month: 'long', 
              day: 'numeric' 
            })}
          </time>
          <div class="text-muted-foreground">
            by Sean Meador
          </div>
        </div>
      </header>

      <!-- Article Content -->
      <div class="prose prose-lg prose-slate dark:prose-invert max-w-none">
        <Content />
      </div>
    </div>
  </article>
</BaseLayout>

<style>
  /* Custom prose styling to match our design system */
  .prose {
    color: hsl(var(--foreground));
  }
  
  .prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 {
    color: hsl(var(--foreground));
  }
  
  .prose a {
    color: hsl(var(--primary));
    text-decoration: none;
  }
  
  .prose a:hover {
    text-decoration: underline;
  }
  
  .prose blockquote {
    border-left-color: hsl(var(--border));
    color: hsl(var(--muted-foreground));
  }
  
  .prose code {
    background-color: hsl(var(--muted));
    color: hsl(var(--foreground));
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;
  }
  
  .prose pre {
    background-color: hsl(var(--muted));
    border: 1px solid hsl(var(--border));
  }
  
  .prose pre code {
    background-color: transparent;
  }
</style>